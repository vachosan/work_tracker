{% extends "tracker/base.html" %}
{% block title %}Test Mapy.cz Leaflet{% endblock %}
{% block content %}
<div class="container py-3">
  <h5>Test Mapy.cz Leaflet API</h5>
  <div id="map" style="width:100%; height:400px; border-radius:10px;"></div>
</div>

<!-- Leaflet CSS & JS -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css"
  integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14="
  crossorigin=""
/>
<script
  src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
  integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg="
  crossorigin=""
></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const API_KEY = "{{ mapy_key }}";

  const map = L.map("map").setView([49.8729317, 14.8981184], 14);

  L.tileLayer(`https://api.mapy.com/v1/maptiles/basic/256/{z}/{x}/{y}?apikey=${API_KEY}`, {
    minZoom: 0,
    maxZoom: 19,
    attribution:
      '<a href="https://api.mapy.com/copyright" target="_blank">&copy; Seznam.cz a.s. a další</a>',
  }).addTo(map);

  // přidáme logo Mapy.com (povinné)
  const LogoControl = L.Control.extend({
    options: { position: "bottomleft" },
    onAdd: function (map) {
      const container = L.DomUtil.create("div");
      const link = L.DomUtil.create("a", "", container);
      link.href = "http://mapy.com/";
      link.target = "_blank";
      link.innerHTML = '<img src="https://api.mapy.com/img/api/logo.svg" width="100px" />';
      L.DomEvent.disableClickPropagation(link);
      return container;
    },
  });
  new LogoControl().addTo(map);
});
</script>
{% endblock %}
